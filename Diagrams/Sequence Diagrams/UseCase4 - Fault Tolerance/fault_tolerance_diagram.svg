<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="698px" preserveAspectRatio="none" style="width:982px;height:698px;background:#FFFFFF;" version="1.1" viewBox="0 0 982 698" width="982px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="686.25" style="stroke:#181818;stroke-width:0.5;" width="96" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90" x="4" y="18.0669">Data Source</text><rect fill="#90EE90" height="686.25" style="stroke:#181818;stroke-width:0.5;" width="728" x="167" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="485" y="18.0669">Flink Cluster</text><rect fill="#FFFFE0" height="686.25" style="stroke:#181818;stroke-width:0.5;" width="77" x="897" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="900" y="18.0669">Data Sink</text><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="44" y="145.8281"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="44" y="334.625"/><rect fill="#FFFFFF" height="552.3906" style="stroke:#181818;stroke-width:1.0;" width="10" x="213.5" y="87.5625"/><rect fill="#FFFFFF" height="523.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="381.5" y="116.6953"/><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="507.5" y="523.4219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="174.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="363.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="552.5547"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="233.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="422.0234"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="610.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48.5" x2="48.5" y1="56.4297" y2="657.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="218" x2="218" y1="56.4297" y2="657.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="386.5" x2="386.5" y1="56.4297" y2="657.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="512.5" x2="512.5" y1="56.4297" y2="657.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="833" x2="833" y1="56.4297" y2="657.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="935" x2="935" y1="56.4297" y2="657.9531"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="17.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="24.5" y="45.1279">Source</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="17.5" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="24.5" y="676.9482">Source</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="171" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="178" y="45.1279">JobManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="171" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="178" y="676.9482">JobManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="328.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="335.5" y="45.1279">TaskManager1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="328.5" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="335.5" y="676.9482">TaskManager1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="454.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="461.5" y="45.1279">TaskManager2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="454.5" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="461.5" y="676.9482">TaskManager2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="776" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="783" y="45.1279">State Backend</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="776" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="783" y="676.9482">State Backend</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43" x="914" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="921" y="45.1279">Sink</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43" x="914" y="656.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="921" y="676.9482">Sink</text><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="44" y="145.8281"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="44" y="334.625"/><rect fill="#FFFFFF" height="552.3906" style="stroke:#181818;stroke-width:1.0;" width="10" x="213.5" y="87.5625"/><rect fill="#FFFFFF" height="523.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="381.5" y="116.6953"/><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="507.5" y="523.4219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="174.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="363.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="552.5547"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="233.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="422.0234"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="610.8203"/><polygon fill="#181818" points="201.5,83.5625,211.5,87.5625,201.5,91.5625,205.5,87.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="207.5" y1="87.5625" y2="87.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="56" y="82.4966">Submit Data Stream</text><polygon fill="#181818" points="369.5,112.6953,379.5,116.6953,369.5,120.6953,373.5,116.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="375.5" y1="116.6953" y2="116.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="230.5" y="111.6294">Schedule Task (Initial)</text><polygon fill="#181818" points="65,141.8281,55,145.8281,65,149.8281,61,145.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="380.5" y1="145.8281" y2="145.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="71" y="140.7622">Fetch Data (Batch 1)</text><polygon fill="#181818" points="816.5,170.9609,826.5,174.9609,816.5,178.9609,820.5,174.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="822.5" y1="174.9609" y2="174.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="61" y="169.895">Save Data Snapshot (Snapshot 1)</text><polygon fill="#181818" points="234.5,200.0938,224.5,204.0938,234.5,208.0938,230.5,204.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="228.5" x2="832.5" y1="204.0938" y2="204.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="240.5" y="199.0278">Snapshot 1 Saved</text><polygon fill="#181818" points="918.5,229.2266,928.5,233.2266,918.5,237.2266,922.5,233.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="391.5" x2="924.5" y1="233.2266" y2="233.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="398.5" y="228.1606">Process and Send Data (Batch 1)</text><polygon fill="#181818" points="234.5,258.3594,224.5,262.3594,234.5,266.3594,230.5,262.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="228.5" x2="934.5" y1="262.3594" y2="262.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="240.5" y="257.2935">Acknowledge Receipt (Batch 1)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="975" x="0" y="290.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="975" y1="290.9258" y2="290.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="975" y1="293.9258" y2="293.9258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="187" x="394" y="280.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="400" y="296.4263">Take Second Snapshot</text><polygon fill="#181818" points="65,330.625,55,334.625,65,338.625,61,334.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="380.5" y1="334.625" y2="334.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="71" y="329.5591">Fetch Data (Batch 2)</text><polygon fill="#181818" points="816.5,359.7578,826.5,363.7578,816.5,367.7578,820.5,363.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="822.5" y1="363.7578" y2="363.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="61" y="358.6919">Save Data Snapshot (Snapshot 2)</text><polygon fill="#181818" points="234.5,388.8906,224.5,392.8906,234.5,396.8906,230.5,392.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="228.5" x2="832.5" y1="392.8906" y2="392.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="240.5" y="387.8247">Snapshot 2 Saved</text><polygon fill="#181818" points="918.5,418.0234,928.5,422.0234,918.5,426.0234,922.5,422.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="391.5" x2="924.5" y1="422.0234" y2="422.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="398.5" y="416.9575">Process and Send Data (Batch 2)</text><polygon fill="#181818" points="234.5,447.1563,224.5,451.1563,234.5,455.1563,230.5,451.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="228.5" x2="934.5" y1="451.1563" y2="451.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="240.5" y="446.0903">Acknowledge Receipt (Batch 2)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="975" x="0" y="479.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="975" y1="479.7227" y2="479.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="975" y1="482.7227" y2="482.7227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="111" x="432" y="469.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="438" y="485.2231">Fault Occurs</text><polygon fill="#181818" points="495.5,519.4219,505.5,523.4219,495.5,527.4219,499.5,523.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="501.5" y1="523.4219" y2="523.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="230.5" y="518.356">Reschedule Task</text><polygon fill="#181818" points="816.5,548.5547,826.5,552.5547,816.5,556.5547,820.5,552.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="517.5" x2="822.5" y1="552.5547" y2="552.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="524.5" y="547.4888">Retrieve Latest Saved Snapshot (Snapshot 2)</text><polygon fill="#181818" points="528.5,577.6875,518.5,581.6875,528.5,585.6875,524.5,581.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="832.5" y1="581.6875" y2="581.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="534.5" y="576.6216">Return Snapshot 2</text><polygon fill="#181818" points="918.5,606.8203,928.5,610.8203,918.5,614.8203,922.5,610.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="517.5" x2="924.5" y1="610.8203" y2="610.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="524.5" y="605.7544">Resume Data Processing from Snapshot 2</text><polygon fill="#181818" points="229.5,635.9531,219.5,639.9531,229.5,643.9531,225.5,639.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="934.5" y1="639.9531" y2="639.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="235.5" y="634.8872">Acknowledge Receipt</text><!--MD5=[3815d1812904c80da767ec7164054816]
@startuml
box "Data Source" #LightBlue
  participant "Source" as S
end box

box "Flink Cluster" #LightGreen
  participant "JobManager" as JM
  participant "TaskManager1" as TM1
  participant "TaskManager2" as TM2
  participant "State Backend" as SB
end box

box "Data Sink" #LightYellow
  participant "Sink" as SK
end box

S -> JM: Submit Data Stream
activate JM

JM -> TM1: Schedule Task (Initial)
activate TM1

TM1 -> S: Fetch Data (Batch 1)
activate S
S -> SB: Save Data Snapshot (Snapshot 1)
activate SB
SB -> JM: Snapshot 1 Saved
deactivate SB
deactivate S

TM1 -> SK: Process and Send Data (Batch 1)
activate SK
SK -> JM: Acknowledge Receipt (Batch 1)
deactivate SK

== Take Second Snapshot ==

TM1 -> S: Fetch Data (Batch 2)
activate S
S -> SB: Save Data Snapshot (Snapshot 2)
activate SB
SB -> JM: Snapshot 2 Saved
deactivate SB
deactivate S

TM1 -> SK: Process and Send Data (Batch 2)
activate SK
SK -> JM: Acknowledge Receipt (Batch 2)
deactivate SK

== Fault Occurs ==

JM -> TM2: Reschedule Task
activate TM2

TM2 -> SB: Retrieve Latest Saved Snapshot (Snapshot 2)
activate SB
SB -> TM2: Return Snapshot 2
deactivate SB

TM2 -> SK: Resume Data Processing from Snapshot 2
activate SK
SK -> JM: Acknowledge Receipt
deactivate SK

deactivate JM
deactivate TM1
deactivate TM2
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>